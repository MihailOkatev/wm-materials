# 3.1 Основы клиент-серверного взаимодействия

## Как работает интернет?

Интернет представляет собой глобальную сеть соединённых между собой компьютеров, если оставить за скобками все дополнительные устройства, такие как роутеры или свитчи. В этой сети нет определённого центра и все компьютеры равноправны между собой. Роли для компьютеров, такие как сервер, домашний ПК, почтовый сервер, пользователи назнают самостоятельно, устанавливая соответствующее программное обеспечение (ПО). 

### IP-адрес

Как только в сети становится больше двух соединённых между собой компьютеров, появляется необходимость обратиться конкретно к одному из них. Возник **IP-адрес** — способ выделить одну физическую машину в сети.

По протоколу IPv4 IP-адрес представляет собой 4 числа (от 0 до 255), разделенных между собой точками:

```
127.0.0.1
```

Помимо индивидуальных адресов машин есть и технические IP-адреса, например, 127.0.0.1 всегда указывает на текущий компьютер.

### Domain Name System (DNS)

В реальной жизни мы не вводим цифры в адресную строку браузера, а пишем доменные имена, такие как [google.ru](https://www.google.ru/) или [netology.ru](http://netology.ru/). Это стало возможным с помощью системы доменных имён — **Domain Name System (DNS)**. Система DNS представляет собой таблицу доменных имен, зарегистрированных на текущий момент, и соответствующих им IP-адресов. Единственным назначением DNS является преобразование доменных имён в IP-адреса.

Таким образом, когда мы вводим в строку браузера адрес, браузер сначала делает запрос на DNS-сервер, преобразует имя в IP-адрес и уже на него посылает запрос.

Возможно, вы видели в настройках соединения вашей операционной системы пункт, касающийся адресов DNS серверов — это как раз о том, куда браузер будет обращаться с тем, чтобы
преобразовать домен в IP-адрес.

## Протокол HTTP

Данные в сети интернет передаются в виде текста. Для того, чтобы правильно запросить данные и получить их в нужном виде, нужны определенные правила. Для этого используются различные протоколы (FTP, IMAP, и т.д.). 

Для передачи веб-страниц используется **HyperText Transfer Protocol (HTTP)** — протокол передачи гипертекста. Текст веб-страниц назван гипертекстом из-за того, что веб-страницы связаны между собой ссылками, образуя тем самым гиперпространства.

HTTP протокол выполняет следующие функции:

* передаёт содержимое веб-страниц;
* передаёт ответ сервера на запрос: всё ОК, или страница не найдена, или нет прав и т.д.;
* передаёт «заголовки» технической информации, например кодировку или cookies;
* передаёт данные со стороны клиента, в том числе загружает файлами
* и многое другое.

## Что такое сервер? 

На самом деле, когда мы говорим «сервер», мы подразумеваем не суровый суперкомпьютер, а лишь набор специального программного обеспечения, способного взаимодействовать по протоколу НТТР. Сам компьютер при этом может быть любым — из старого ноутбука получится очень медленный сервер, но он будет выполнять свою роль.

### Технологии для сервера
Несмотря на то, что превратить в сервер можно даже домашний компьютер на Windows, в реальной жизни в качестве операционной системы для веб-серверов чаще всего используется **Linux**.

Кроме Linux также ставят «начинку», например, ставшую классической связку Apache + PHP + Mysql. Вместе с Linux эта связка известна под аббревиатурой **lamp**.

**Apache** обрабатывает входящие запросы. Он определяет, к какому файлу на компьютере направлен запрос и передаёт его интерпретатору.

**PHP** — это интерпретатор, который читает файл, выполняет команды и формирует ответ в виде текста.

**MySQL** отвечает за чтение и запись в базу данных.

Кроме lamp используются и другие сочетания программных продуктов. В настоящее время набирает популярность связка Node.JS + MongoDB, где Node.JS выполняет роль Apache и PHP, а MongoDB, соответственно, работает с базой данных.

Поскольку «сервер» это только программное обеспечение, мы не ограничены ни Linux, ни чем-то еще другим. Существует множество пакетов для любой машины, позволяющих настроить сервер:

* Denver
* Open Server
* XAMPP
* WampServer

## Что мы подразумеваем, когда говорим frontend/backend?

### Backend
После того, как сервер получил запрос от клиента, он должен сформировать ответ и передать его, скорее всего, в формате гипертекста. **Backend** веб-приложения — это и есть система различных скриптов, выполняющихся на сервере, которая позволяет формировать ответ на запросы клиентов.

Например, скрипт, который выводит текущее время на php может выглядеть так:

```
<?php echo date("Y-m-d H:i");
```

### Frontend
После того, как браузер получил ответ сервера (html-код), он должен его обработать и отобразить пользователю. Система скриптов, работающая на стороне пользователя (в браузере) и называется **frontend**.

## Javascript
После формирования различных страниц на сервере, есть возможность «оживить» наше веб-приложение на клиенте. За это отвечает **JavaScript**.

JavaScript коды можно писать самому, размещая в теле вашего html-документа в тегах `script`:
```
<script></script>
```
 
Можно пользоваться готовыми библиотеками, которые часто уже имеют в себе функционал, на самостоятельную разработку которого потребовалось бы много времени. К таким библиотекам часто прилагается несложная инструкция по установке. Например, инструкция к библиотеке [fotorama](http://fotorama.io/set-up/).